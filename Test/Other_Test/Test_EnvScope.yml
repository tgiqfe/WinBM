---
kind: Init
metadata:
  priority: -1000
init:
  spec:
  - param:
      set: 'Weight = 10'
      scope: File

---
kind: Output
metadata:
  priority: 100
output:
  spec:
  - task: Standard/Console/StdOut

---
kind: Job
metadata:
  priority: 101
job:
  work:
  - task: Standard/Prepare/Env
    param:
      set: |-
        AAAA = 12341234
        BBBB = 56785678
      scope: File
  - task: Standard/Message/StdOut
    param:
      textResolvEnv: 'test ⇒ AAAA: %AAAA%'
  - task: Standard/Prepare/Env
    param:
      set: |-
        CCCC = ABCDABCD
      scope: Page
  - task: Standard/Message/StdOut
    param:
      textResolvEnv: 'test ⇒ CCCC: %CCCC%'

---
kind: Job
metadata:
  name: test
  priority: (102 + 1) * 1.5
job:
  work:
  - task: Standard/Message/StdOut
    param:
      textResolvEnv: 'test ⇒ BBBB: %BBBB%'
  - task: Standard/Message/StdOut
    param:
      textResolvEnv: 'test ⇒ Waight: %Weight%'
  - task: Standard/Message/StdOut
    param:
      textResolvEnv: 'test ⇒ WEIGHT: %WEIGHT%'
  - task: Standard/Message/StdOut
    param:
      textResolvEnv: 'test ⇒ CCCC: %CCCC%'

---
kind: Job
metadata:
  priority: 200 + 15
job:
  work:
  - task: Standard/Prepare/Env
    param:
      set: |-
        wait = 3
  - task: Standard/Message/StdOut
    param:
      messageResolvEnv: 'Wait: %wait%'
  - task: Standard/Message/StdOut
    param:
      messageResolvenv: '%DATETIME%'
  - task: Standard/Execute/Sleep
    param:
      seconds: '%wait%'
  - task: Standard/Message/StdOut
    param:
      messageResolvenv: '%DATETIME%'
